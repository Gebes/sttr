go generate
go test ./...
returncode=$?
if [ $returncode -ne 0 ]; then
  echo "unit tests failed"
  exit 1
fi

if [[ $(git status cmd --porcelain) ]]; then
   echo "Uncommited files present in cmd folder";
   echo "Make sure to run go generate and add the files to git"
   exit 1;
fi
exit 1;